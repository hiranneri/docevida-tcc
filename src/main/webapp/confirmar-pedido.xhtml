<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	  xmlns:p="http://primefaces.org/ui">
 <h:head>
	<meta charset="UTF-8"/>
	<title>Confirmação do Pedido</title>
	<link rel="stylesheet" type="text/css" href="#{facesContext.externalContext.requestContextPath}/css/estilo-pedido.css" media="screen" />
	
</h:head>
<h:body>
	<img src="img/docevida.png" id="logo"></img>
    <h1>Confirmação do Pedido</h1>
    
	<h:form id="formConfirmar">
	<p:growl id="growl" showDetail="true" sticky="true"/>
		
		<h:outputText value="Data do Pedido: " class="labels"/>
    	<h:outputText value="#{EfetuarPedidoBean.strDataAtual}" class="labels"></h:outputText>
    	<br></br>
    	<br></br>
    	<p:outputLabel for="dataEntrega" value="Data da Entrega:  " class="labels"/>
        <h:outputText id="dataEntrega" value="#{EfetuarPedidoBean.strDataDaEntrega}" class="labels"/>
    	<br></br>
    	<br></br>
        <h:outputText value="Cliente: " class="labels"></h:outputText>
    	<h:outputText value="#{EfetuarPedidoBean.cliente.nome}" id="cliente" class="labels"></h:outputText>
    	<br></br>
    	<br></br>
    	<h:outputText value="Itens" class="labels"></h:outputText>
    	<br></br>
    	<br></br>
    	<p:dataTable value="#{EfetuarPedidoBean.pedido.itensDoPedido}" var="item" dynamic="true" 
        id="tblProdutos" emptyMessage="Nenhum Produto Adicionado"  rows="15" paginator="true" 
        paginatorAlwaysVisible="false" paginatorPosition="bottom">
        
	  		<p:column headerText="Mercadoria">
	  			<h:outputText value="#{item.produto.nmProduto}"></h:outputText>
	  		</p:column>
	  		<p:column headerText="Quantidade">
	  			<h:outputText value="#{item.quantidade}"></h:outputText>
	  		</p:column>
	  		<p:column headerText="Valor Unitário">
                  <h:outputText value="#{item.produto.valorUnitario}" />
            </p:column>
             
            <p:column headerText="Subtotal">
                  <h:outputText value="#{item.subTotal}"  />
             </p:column>  
  	</p:dataTable>
  	<br></br>
    <br></br>
    <h:outputText value="Valor Total: R$ " class="cifrao"></h:outputText>
    <h:outputText value="#{EfetuarPedidoBean.pedido.valorTotal}" class="valorTotal"></h:outputText>
    <br></br>
    <br></br>	
    <!-- Salvar no banco e redirecionar para a tela home.xhtml -->
    <p:commandButton value="Efetuar Pedido" icon="ui-icon-check" actionListener="#{EfetuarPedidoBean.realizarNovoPedido}" />
    <p:commandButton value="Cancelar"  icon="ui-icon-trash" action="#{EfetuarPedidoBean.cancelarPedido}" />
    
    </h:form>
		 
    		
    </h:body>
</html>